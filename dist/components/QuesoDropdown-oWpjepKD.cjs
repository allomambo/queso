var T=require("../assets/components/QuesoDropdown.css");const e=require("vue"),_=require("./QuesoCollapsible-xJE8mDuS.cjs"),q={class:"queso-dropdown__selector__text"},C={key:0,class:"queso-dropdown__selector__placeholder"},E={key:1,class:"queso-dropdown__selector__active-label"},N={class:"queso-dropdown__selector__icon"},V=["aria-expanded"],P={key:0,class:"queso-dropdown__popover__header"},D=["onClick"],b={key:1,class:"queso-dropdown__popover__footer"},z=e.defineComponent({__name:"QuesoDropdown",props:{defaultOptions:{default:()=>[]},options:{default:()=>[]},multiple:{type:Boolean},stayOpenOnSelection:{type:Boolean}},emits:["update:options","open:dropdown","close:dropdown"],setup(f,{expose:k,emit:w}){const r=f,c=w,v=e.ref(),a=e.ref(),n=e.ref(!1),d=e.ref([]),t=e.computed(()=>d.value.length>0?d.value:r.defaultOptions);e.onMounted(()=>{r.multiple&&(d.value=r.defaultOptions)});const h=e.computed(()=>({"is-dropdown-open":n.value,"is-dropdown-close":!n.value,"has-value":t.value.length>=1,"has-no-value":t.value.length<1,"is-multiple":r.multiple})),y=o=>{if(r.multiple){let s=0;d.value=d.value.filter(l=>{const i=l.key!==o.key;return i||s++,i}),s<1&&d.value.push(o)}else d.value=[o];c("update:options",t.value),r.multiple||r.stayOpenOnSelection||p()},g=()=>{setTimeout(()=>{B.value=0},210)},u=()=>{n.value=!0,c("open:dropdown")},p=()=>{n.value=!1,c("close:dropdown"),g()},S=(o=!1)=>{o?u():p()};_.onClickOutside(v,()=>p());const{y:B,arrivedState:m}=_.useScroll(a,{offset:{top:15,bottom:15}}),O=e.computed(()=>{var o,s;return a.value?((o=a.value)==null?void 0:o.scrollHeight)>((s=a.value)==null?void 0:s.clientHeight):!1}),$=e.computed(()=>({"is-scrolled-top":m.top,"is-scrolled-bottom":m.bottom||!O.value}));return k({isDropdownOpen:n,openDropdown:u,closeDropdown:p}),(o,s)=>o.options.length>0?(e.openBlock(),e.createElementBlock("div",{key:0,class:e.normalizeClass(["queso-dropdown",h.value]),ref_key:"dropdown",ref:v},[e.createElementVNode("div",{class:"queso-dropdown__selector",onClick:s[0]||(s[0]=l=>S(!n.value))},[e.renderSlot(o.$slots,"header",e.normalizeProps(e.guardReactiveProps({activeOptions:t.value})),()=>[e.renderSlot(o.$slots,"prefix"),e.createElementVNode("div",q,[t.value.length<1?(e.openBlock(),e.createElementBlock("div",C,[e.renderSlot(o.$slots,"placeholder")])):(e.openBlock(),e.createElementBlock("div",E,[e.renderSlot(o.$slots,"selector",e.normalizeProps(e.guardReactiveProps({activeOptions:t.value})),()=>[e.createTextVNode(e.toDisplayString(t.value),1)])]))]),e.renderSlot(o.$slots,"suffix"),e.createElementVNode("div",N,[e.renderSlot(o.$slots,"icon",{},()=>[e.createTextVNode("â†“")])])])]),e.createElementVNode("div",{class:"queso-dropdown__popover","aria-expanded":n.value},[o.$slots.popoverHeader?(e.openBlock(),e.createElementBlock("div",P,[e.renderSlot(o.$slots,"popoverHeader")])):e.createCommentVNode("",!0),e.createElementVNode("div",{class:e.normalizeClass(["queso-dropdown__popover__scroll",$.value])},[e.createElementVNode("ul",{ref_key:"dropdownPopover",ref:a,class:"queso-dropdown__popover__options-list"},[e.renderSlot(o.$slots,"beforeItems"),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(o.options,l=>(e.openBlock(),e.createElementBlock("li",{key:l.key,onClick:i=>y(l),class:e.normalizeClass(["queso-dropdown__popover__options-list__item",{"is-active":t.value.find(i=>i.key===l.key)}])},[e.renderSlot(o.$slots,"item",e.normalizeProps(e.guardReactiveProps({...l,openDropdown:u,closeDropdown:p})),()=>[e.createTextVNode(e.toDisplayString(l),1)])],10,D))),128)),e.renderSlot(o.$slots,"afterItems")],512)],2),o.$slots.popoverFooter?(e.openBlock(),e.createElementBlock("div",b,[e.renderSlot(o.$slots,"popoverFooter")])):e.createCommentVNode("",!0)],8,V)],2)):e.createCommentVNode("",!0)}});exports._sfc_main=z;
