var T=require("../assets/DropdownBase.css");const e=require("vue"),f=require("./CollapsibleBase-d01f14aa.cjs"),q={class:"queso-dropdown__selector__text"},C={key:0,class:"queso-dropdown__selector__placeholder"},E={key:1,class:"queso-dropdown__selector__active-label"},$={class:"queso-dropdown__selector__icon"},N=["aria-expanded"],V={key:0,class:"queso-dropdown__popover__header"},D=["onClick"],P={key:1,class:"queso-dropdown__popover__footer"},b=e.defineComponent({__name:"DropdownBase",props:{defaultOptions:{default:()=>[]},options:{default:()=>[]},multiple:{type:Boolean},stayOpenOnSelection:{type:Boolean}},emits:["update:options","open:dropdown","close:dropdown"],setup(c,{expose:w,emit:u}){const l=c,_=e.ref(),a=e.ref(),n=e.ref(!1),r=e.ref([]),d=e.computed(()=>r.value.length>0?r.value:l.defaultOptions);e.onMounted(()=>{l.multiple&&(r.value=l.defaultOptions)});const k=e.computed(()=>({"is-dropdown-open":n.value,"is-dropdown-close":!n.value,"has-value":d.value.length>=1,"has-no-value":d.value.length<1,"is-multiple":l.multiple})),y=o=>{if(l.multiple){let t=0;r.value=r.value.filter(s=>{const i=s.key!==o.key;return i||t++,i}),t<1&&r.value.push(o)}else r.value=[o];u("update:options",d.value),l.multiple||l.stayOpenOnSelection||p()},h=()=>{setTimeout(()=>{g.value=0},210)},v=()=>{n.value=!0,u("open:dropdown")},p=()=>{n.value=!1,u("close:dropdown"),h()},B=(o=!1)=>{o?v():p()};f.onClickOutside(_,()=>p());const{y:g,arrivedState:m}=f.useScroll(a,{offset:{top:15,bottom:15}}),S=e.computed(()=>{var o,t;return a.value?((o=a.value)==null?void 0:o.scrollHeight)>((t=a.value)==null?void 0:t.clientHeight):!1}),O=e.computed(()=>({"is-scrolled-top":m.top,"is-scrolled-bottom":m.bottom||!S.value}));return w({isDropdownOpen:n,openDropdown:v,closeDropdown:p}),(o,t)=>c.options.length>0?(e.openBlock(),e.createElementBlock("div",{key:0,class:e.normalizeClass(["queso-dropdown",e.unref(k)]),ref_key:"dropdown",ref:_},[e.createElementVNode("div",{class:"queso-dropdown__selector",onClick:t[0]||(t[0]=s=>B(!n.value))},[e.renderSlot(o.$slots,"prefix"),e.createElementVNode("div",q,[e.unref(d).length<1?(e.openBlock(),e.createElementBlock("div",C,[e.renderSlot(o.$slots,"placeholder")])):(e.openBlock(),e.createElementBlock("div",E,[e.renderSlot(o.$slots,"selector",e.normalizeProps(e.guardReactiveProps({activeOptions:e.unref(d)})),()=>[e.createTextVNode(e.toDisplayString(e.unref(d)),1)])]))]),e.renderSlot(o.$slots,"suffix"),e.createElementVNode("div",$,[e.renderSlot(o.$slots,"icon",{},()=>[e.createTextVNode("â†“")])])]),e.createElementVNode("div",{class:"queso-dropdown__popover","aria-expanded":n.value},[o.$slots.popoverHeader?(e.openBlock(),e.createElementBlock("div",V,[e.renderSlot(o.$slots,"popoverHeader")])):e.createCommentVNode("",!0),e.createElementVNode("div",{class:e.normalizeClass(["queso-dropdown__popover__scroll",e.unref(O)])},[e.createElementVNode("ul",{ref_key:"dropdownPopover",ref:a,class:"queso-dropdown__popover__options-list"},[e.renderSlot(o.$slots,"beforeItems"),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(c.options,s=>(e.openBlock(),e.createElementBlock("li",{key:s.key,onClick:i=>y(s),class:e.normalizeClass(["queso-dropdown__popover__options-list__item",{"is-active":e.unref(d).find(i=>i.key===s.key)}])},[e.renderSlot(o.$slots,"item",e.normalizeProps(e.guardReactiveProps({...s,openDropdown:v,closeDropdown:p})),()=>[e.createTextVNode(e.toDisplayString(s),1)])],10,D))),128)),e.renderSlot(o.$slots,"afterItems")],512)],2),o.$slots.popoverFooter?(e.openBlock(),e.createElementBlock("div",P,[e.renderSlot(o.$slots,"popoverFooter")])):e.createCommentVNode("",!0)],8,N)],2)):e.createCommentVNode("",!0)}});exports._sfc_main=b;
