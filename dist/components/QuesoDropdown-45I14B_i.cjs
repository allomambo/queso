var z=require("../assets/components/QuesoDropdown.css");const e=require("vue"),m=require("./QuesoCollapsible-_rBQ9I9T.cjs"),C={class:"queso-dropdown__selector__text"},E={key:0,class:"queso-dropdown__selector__placeholder"},$={key:1,class:"queso-dropdown__selector__active-label"},N={class:"queso-dropdown__selector__icon"},V=["aria-expanded"],P={key:0,class:"queso-dropdown__popover__header"},D=["onClick"],b={key:1,class:"queso-dropdown__popover__footer"},T=e.defineComponent({__name:"QuesoDropdown",props:{defaultOptions:{default:()=>[]},options:{default:()=>[]},multiple:{type:Boolean},stayOpenOnSelection:{type:Boolean}},emits:["update:options","open:dropdown","close:dropdown"],setup(f,{expose:k,emit:w}){const l=f,c=w,v=e.ref(),p=e.ref(),r=e.ref(!1),n=e.ref([]),d=e.computed(()=>n.value.length>0?n.value:l.defaultOptions);e.onMounted(()=>{l.multiple&&(n.value=l.defaultOptions)});const h=e.computed(()=>({"is-dropdown-open":r.value,"is-dropdown-close":!r.value,"has-value":d.value.length>=1,"has-no-value":d.value.length<1,"is-multiple":l.multiple})),y=o=>{if(l.multiple){let t=0;n.value=n.value.filter(s=>{const i=s.key!==o.key;return i||t++,i}),t<1&&n.value.push(o)}else n.value=[o];c("update:options",d.value),l.multiple||l.stayOpenOnSelection||a()},g=()=>{setTimeout(()=>{S.value=0},210)},u=()=>{r.value=!0,c("open:dropdown")},a=()=>{r.value=!1,c("close:dropdown"),g()},B=(o=!1)=>{o?u():a()};m.onClickOutside(v,()=>a());const{y:S,arrivedState:_}=m.useScroll(p,{offset:{top:15,bottom:15}}),O=e.computed(()=>{var o,t;return p.value?((o=p.value)==null?void 0:o.scrollHeight)>((t=p.value)==null?void 0:t.clientHeight):!1}),q=e.computed(()=>({"is-scrolled-top":_.top,"is-scrolled-bottom":_.bottom||!O.value}));return k({isDropdownOpen:r,openDropdown:u,closeDropdown:a}),(o,t)=>o.options.length>0?(e.openBlock(),e.createElementBlock("div",{key:0,class:e.normalizeClass(["queso-dropdown",h.value]),ref_key:"dropdown",ref:v},[e.createElementVNode("div",{class:"queso-dropdown__selector",onClick:t[0]||(t[0]=s=>B(!r.value))},[e.renderSlot(o.$slots,"prefix"),e.createElementVNode("div",C,[d.value.length<1?(e.openBlock(),e.createElementBlock("div",E,[e.renderSlot(o.$slots,"placeholder")])):(e.openBlock(),e.createElementBlock("div",$,[e.renderSlot(o.$slots,"selector",e.normalizeProps(e.guardReactiveProps({activeOptions:d.value})),()=>[e.createTextVNode(e.toDisplayString(d.value),1)])]))]),e.renderSlot(o.$slots,"suffix"),e.createElementVNode("div",N,[e.renderSlot(o.$slots,"icon",{},()=>[e.createTextVNode("â†“")])])]),e.createElementVNode("div",{class:"queso-dropdown__popover","aria-expanded":r.value},[o.$slots.popoverHeader?(e.openBlock(),e.createElementBlock("div",P,[e.renderSlot(o.$slots,"popoverHeader")])):e.createCommentVNode("",!0),e.createElementVNode("div",{class:e.normalizeClass(["queso-dropdown__popover__scroll",q.value])},[e.createElementVNode("ul",{ref_key:"dropdownPopover",ref:p,class:"queso-dropdown__popover__options-list"},[e.renderSlot(o.$slots,"beforeItems"),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(o.options,s=>(e.openBlock(),e.createElementBlock("li",{key:s.key,onClick:i=>y(s),class:e.normalizeClass(["queso-dropdown__popover__options-list__item",{"is-active":d.value.find(i=>i.key===s.key)}])},[e.renderSlot(o.$slots,"item",e.normalizeProps(e.guardReactiveProps({...s,openDropdown:u,closeDropdown:a})),()=>[e.createTextVNode(e.toDisplayString(s),1)])],10,D))),128)),e.renderSlot(o.$slots,"afterItems")],512)],2),o.$slots.popoverFooter?(e.openBlock(),e.createElementBlock("div",b,[e.renderSlot(o.$slots,"popoverFooter")])):e.createCommentVNode("",!0)],8,V)],2)):e.createCommentVNode("",!0)}});exports._sfc_main=T;
